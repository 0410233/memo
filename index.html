<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MEMO</title>
  <link rel="stylesheet" href="./assets/style.css">
</head>
<body>
  <div id="app">
    <img v-if="order" class="memobg" :src="'./assets/memo_bg_' + order + '.png'" alt=""
      :style="{filter: `blur(${blur}px)`}"
    >
    <div class="mask"></div>
    <div class="guide" :class="{'is-active': active, 'is-hide': hide}">
      <!-- <div class="welcome">欢迎光临</div>
      <div class="title">梦境空间</div>
      <div class="lets">在此</div> -->
      <div class="welcome">欢迎来到「梦境空间」</div>
      <div class="start" @click="start">开启梦境之旅</div>
    </div>
    <div class="change-btn" @click="changeBg">切换背景</div>
  </div>

  <script src="./vue/vue.global.prod.js"></script>
  <!-- <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script> -->
  <script>
    const { createApp, ref } = Vue
    createApp({
      setup() {
        function randomRange(n1, n2) {
          return Math.floor(Math.random() * (n2-n1)) + n1
        }
        const order = ref('')
        const blur = ref(27)
        const active = ref(false)
        const hide = ref(false)

        function changeBg() {
          active.value = false
          hide.value = false

          let n;
          do {
            n = ('00' + randomRange(1, 10)).slice(-2)
          } while (n === order.value);
          order.value = n

          blur.value = 27

          setTimeout(() => {
            active.value = true
          }, 300)
        }

        setTimeout(() => {
          changeBg()
        })

        function start() {
          blur.value = 0
          hide.value = true
          // active.value = false
        }

        return {
          order,
          blur,
          active,
          hide,
          changeBg,
          start,
        }
      }
    }).mount('#app')
  </script>
</body>
</html>
